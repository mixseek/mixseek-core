{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "EvaluationRequest",
  "description": "Request for evaluating an AI agent's response. Contains the user's query, the AI agent's response, and contextual information.",
  "type": "object",
  "properties": {
    "user_query": {
      "type": "string",
      "description": "The original query from the user",
      "minLength": 1,
      "examples": ["What are the benefits of Python?"]
    },
    "submission": {
      "type": "string",
      "description": "The response generated by the AI agent to be evaluated",
      "minLength": 1,
      "examples": ["Python is a versatile programming language with extensive libraries..."]
    },
    "team_id": {
      "type": "string",
      "description": "Identifier for the team that generated this response",
      "minLength": 1,
      "examples": ["team-alpha-001", "team-beta-002"]
    },
    "config": {
      "description": "Optional custom evaluation configuration (overrides default from TOML)",
      "anyOf": [
        {
          "$ref": "#/definitions/EvaluationConfig"
        },
        {
          "type": "null"
        }
      ]
    }
  },
  "required": ["user_query", "submission", "team_id"],
  "additionalProperties": false,
  "definitions": {
    "EvaluationConfig": {
      "type": "object",
      "description": "Optional evaluation configuration override",
      "properties": {
        "default_model": {
          "type": "string",
          "pattern": "^[^:]+:[^:]+$",
          "description": "Default LLM model in 'provider:model-name' format"
        },
        "max_retries": {
          "type": "integer",
          "minimum": 0,
          "description": "Maximum retry attempts for LLM API calls"
        },
        "metric": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/MetricConfig"
          },
          "minItems": 1,
          "description": "List of metric configurations"
        }
      },
      "required": ["metric"]
    },
    "MetricConfig": {
      "type": "object",
      "description": "Configuration for a single evaluation metric",
      "properties": {
        "name": {
          "type": "string",
          "minLength": 1,
          "description": "Metric name",
          "examples": ["clarity_coherence", "coverage", "relevance"]
        },
        "weight": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0,
          "description": "Metric weight for weighted average (0.0 to 1.0)"
        },
        "model": {
          "anyOf": [
            {
              "type": "string",
              "pattern": "^[^:]+:[^:]+$",
              "description": "LLM model override in 'provider:model-name' format"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": ["name", "weight"]
    }
  }
}
