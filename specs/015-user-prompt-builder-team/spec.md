# æ©Ÿèƒ½ä»•æ§˜æ›¸: UserPromptBuilder - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ•´å½¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒ**: `092-user-prompt-builder-team`
**ä½œæˆæ—¥**: 2025-11-18
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ãƒ‰ãƒ©ãƒ•ãƒˆ
**å…¥åŠ›**: ãƒ¦ãƒ¼ã‚¶èª¬æ˜Ž: "[æ¦‚è¦]
å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ãŠã‘ã‚‹Agent, LLMã«å…¥åŠ›ã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ•´å½¢ã¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“ã®ç²¾åº¦æ”¹å–„ã«ã¨ã£ã¦éžå¸¸ã«é‡è¦ã§ã‚ã‚‹ã€‚
æœ¬ãƒ–ãƒ©ãƒ³ãƒã§ã¯ã€å…¥åŠ›ã•ã‚Œã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæˆå½¢ã¨ãã®çµæžœã®ç²¾åº¦æ¯”è¼ƒã€å®Ÿé¨“ã‚’å®¹æ˜“ã«ç®¡ç†å¯èƒ½ã¨ã™ã‚‹ãŸã‚ã®æ”¹ä¿®ã‚’è¡Œã†ã€‚
è¨­è¨ˆæ›¸ã®ä½œæˆã¯æ—¥æœ¬èªžã§è¡Œã†ã“ã¨ã€‚

[ã‚³ã‚¢æ€æƒ³]
- å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ(Team, Evaluator, JudgementClient)ã¸ã®å…¥åŠ›ã¨ãªã‚‹user_promptã®æ•´å½¢ã‚’ã™ã¹ã¦æ‹…ã†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ UserPromptBuilder ã‚’æ–°ãŸã«å®Ÿè£…ã™ã‚‹
- user_promptã¯jinja2ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç”¨ã„ã¦ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å¤‰æ•°ä»˜ãã§tomlç®¡ç†ã™ã‚‹
- UserPromptBuilderä»¥å¤–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯å†…éƒ¨ã§å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ•´å½¢ã‚’è¡Œã‚ãªã„
- å„user_promptã‚’å®Ÿé¨“ç®¡ç†å¯èƒ½ã¨ã—ã€æ”¹å–„ã€å¾®èª¿æ•´ãŒå®¹æ˜“ã§ã‚ã‚‹

[ã‚¹ã‚³ãƒ¼ãƒ—]
- å„Teamã«æ¸¡ã™ãƒ¦ãƒ¼ã‚¶ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæˆå½¢ã®ã¿ã‚’ UserPromptBuilder ã®æ©Ÿèƒ½ã¨ã—ã¦å®Ÿè£…ã™ã‚‹
- ãã®ä»–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ(Evaluator, Judgement Client)ã«æ¸¡ã™ãƒ¦ãƒ¼ã‚¶ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯ä¸€æ—¦ç¾çŠ¶ã®ã¾ã¾ã¨ã—ã€æœ¬ãƒ–ãƒ©ãƒ³ãƒã®mergeå¾Œã«å¯¾å¿œã™ã‚‹
    - ãã®ä»–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¸ã®å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæˆå½¢ã‚’ UserPromptBuilder ã«ä»Šå¾Œå®Ÿè£…ã™ã‚‹ã“ã¨ã‚’å¿µé ­ã«ç½®ã

[è¦ä»¶]
- ä¾å­˜é–¢ä¿‚ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ç¤ºã—ãŸè¨­è¨ˆã‚’å¿…ãšå‚ç…§ã™ã‚‹ã“ã¨
- UserPromptBuilderã¯ç‹¬ç«‹ã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦å®Ÿè£…ã™ã‚‹
- RoundControllerã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæˆå½¢ãƒ­ã‚¸ãƒƒã‚¯ã‚’å¯èƒ½ãªé™ã‚Šãã®ã¾ã¾ç§»æ¤ã™ã‚‹
    - æ—¢å­˜ã®Pydantic Modelã§åˆ©ç”¨ã§ãã‚‹ã‚‚ã®ã¯ãã®ã¾ã¾åˆ©ç”¨ã™ã‚‹
- tomlã§è¨­å®šã§ãã‚‹jinja2ã®åˆ©ç”¨å¯èƒ½ãªãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å¤‰æ•°ãŒã€å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¸ã®å…¥åŠ›ã”ã¨ã«ã‚ã‹ã‚Šã‚„ã™ãæ•´å‚™ã•ã‚Œã¦ã„ã‚‹
    - å°†æ¥çš„ã«ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å¤‰æ•°ã¨ãã®åŸ‹ã‚è¾¼ã¿ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã„ãŒã€æœ¬ãƒ–ãƒ©ãƒ³ãƒã§ã¯ã‚¹ã‚³ãƒ¼ãƒ—å¤–ã¨ã™ã‚‹
- å¤‰æ•°åŸ‹ã‚è¾¼ã¿ã§forãƒ«ãƒ¼ãƒ—ãªã©ã¯ä½¿ã‚ãšã€UserPromptBuilderã®å†…éƒ¨ã§æˆå½¢ã—ãŸæ–‡å­—åˆ—å¤‰æ•°ã‚’ç›´æŽ¥é©ç”¨ã™ã‚‹
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ¨ªæ–­ã§åˆ©ç”¨ã§ãã‚‹ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å¤‰æ•°ã¨ã—ã¦ã€ç¾åœ¨æ™‚åˆ»å¤‰æ•°ã‚’å®Ÿè£…ã™ã‚‹
- ç¾åœ¨æ™‚åˆ»ã¯ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ä»˜ãã§å‡ºåŠ›ã—ã€TZç’°å¢ƒå¤‰æ•°ãŒãªã„å ´åˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯UTCã¨ã™ã‚‹
- UserPromptBuilderã®è¨­å®šã¯ `051-configuration` ä»•æ§˜ã«ãŠã‘ã‚‹å®Ÿè£…æ¸ˆã¿ã®è¨­å®šç®¡ç†ã«å¾“ã£ã¦å®Ÿè£…ã™ã‚‹
- `mixseek config init` ã‚³ãƒžãƒ³ãƒ‰ã§ã€UserPromptBuilderã®tomlåˆæœŸåŒ–ã«å¯¾å¿œã™ã‚‹
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ç”¨ã„ã‚‹

[ä¾å­˜é–¢ä¿‚]
- 001-mixseek-core-specs: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ã‚¢è¨­è¨ˆ
- 012-round-controller: RoundControllerè¨­è¨ˆã¨å®Ÿè£…
- 051-configuration: è¨­å®šç®¡ç†è¨­è¨ˆã¨å®Ÿè£…"

## Clarifications

### Session 2025-11-18

- Q: FR-002ã«ã¤ã„ã¦ã€LBãƒ©ãƒ³ã‚­ãƒ³ã‚°å–å¾—ã¯PromptBuilderã®å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚‹ã‹ã€å†…éƒ¨æ©Ÿèƒ½ã¨ã—ã¦å®Ÿè£…ã™ã‚‹ã‹ï¼Ÿ â†’ A: PromptBuilderã®å†…éƒ¨æ©Ÿèƒ½ã¨ã—ã¦å®Ÿè£…ã™ã‚‹
- Q: ãƒ¦ãƒ¼ã‚¶ã‚¹ãƒˆãƒ¼ãƒªãƒ¼1ï¼ˆRound 1ï¼‰ã¨ãƒ¦ãƒ¼ã‚¶ã‚¹ãƒˆãƒ¼ãƒªãƒ¼2ï¼ˆRound 2ä»¥é™ï¼‰ã‚’çµ±åˆã—ã€å…±é€šã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã‹ï¼Ÿ â†’ A: çµ±åˆã™ã‚‹ã€‚round1ã§rankingã¨éŽåŽ»ã®submissionãŒãªã„å ´åˆã¯ã€ãã®ã“ã¨ã‚’æ˜Žç¤ºã™ã‚‹æ–‡å­—åˆ—ã‚’å¤‰æ•°å€¤ã¨ã—ã¦åŸ‹ã‚è¾¼ã‚€
- Q: ã€Œç›´è¿‘2ãƒ©ã‚¦ãƒ³ãƒ‰ã®å±¥æ­´ã®ã¿ãŒå«ã¾ã‚Œã‚‹ã€ã¨ã„ã†è¨˜è¿°ã«ã¤ã„ã¦ã€ã™ã¹ã¦ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã®å±¥æ­´ã‚’å«ã‚€ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã‹ï¼Ÿ â†’ A: ã™ã¹ã¦ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã®å±¥æ­´ã‚’å«ã‚€ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹
- Q: round_prompt.j2ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã›ãšã€prompt_builder.tomlã«å¤‰æ•°åŸ‹ã‚è¾¼ã¿ã‚’åˆ©ç”¨ã—ã¦team_user_promptã‚’å®šç¾©ã™ã‚‹ã‹ï¼Ÿ â†’ A: prompt_builder.tomlã«å¤‰æ•°åŸ‹ã‚è¾¼ã¿å½¢å¼ã§team_user_promptã‚’å®šç¾©ã™ã‚‹
- Q: timezoneè¨­å®šã¯ã‚·ã‚¹ãƒ†ãƒ ã®ç’°å¢ƒå¤‰æ•°TZã«ã®ã¿ä¾å­˜ã—ã€tomlã§ã¯ç®¡ç†ã—ãªã„ã‹ï¼Ÿ â†’ A: ç’°å¢ƒå¤‰æ•°TZã®ã¿ã«ä¾å­˜ã™ã‚‹

### Session 2025-11-19

- Q: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«åˆæœŸåŒ–ã‚³ãƒžãƒ³ãƒ‰ã®ä¿®æ­£ â†’ A: `mixseek config init` ã‚’ä½¿ç”¨ã™ã‚‹ï¼ˆ`mixseek init` ã§ã¯ãªãï¼‰
- Q: ç¾åœ¨æ—¥æ™‚ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å‡¦ç†ã®æ˜Žç¢ºåŒ– â†’ A: TZç’°å¢ƒå¤‰æ•°ãŒãªã„å ´åˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯UTCã¨ã™ã‚‹ï¼ˆæ—¥æœ¬æ™‚é–“ã§ã¯ãªãï¼‰

## ãƒ¦ãƒ¼ã‚¶ã‚·ãƒŠãƒªã‚ªã¨ãƒ†ã‚¹ãƒˆ *(å¿…é ˆ)*

### ãƒ¦ãƒ¼ã‚¶ã‚¹ãƒˆãƒ¼ãƒªãƒ¼1 - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ•´å½¢ã¨å±¥æ­´çµ±åˆ (å„ªå…ˆåº¦: P1)

é–‹ç™ºè€…ã¨ã—ã¦ã€RoundControllerãŒUserPromptBuilderã‚’ä½¿ç”¨ã—ã¦ã€ã™ã¹ã¦ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ•´å½¢ã—ã€ãƒ©ã‚¦ãƒ³ãƒ‰2ä»¥é™ã§ã¯éŽåŽ»ã®Submissionå±¥æ­´ã¨è©•ä¾¡ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’çµ±åˆã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„ã€‚ãƒ©ã‚¦ãƒ³ãƒ‰1ã§ã¯ã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã¨éŽåŽ»ã®SubmissionãŒå­˜åœ¨ã—ãªã„ã“ã¨ã‚’æ˜Žç¤ºã™ã‚‹ã€‚

**ã“ã®å„ªå…ˆåº¦ã®ç†ç”±**: ã“ã‚Œã¯UserPromptBuilderã®ä¸­æ ¸æ©Ÿèƒ½ã§ã‚ã‚Šã€TUMIXè«–æ–‡ã«åŸºã¥ãåå¾©æ”¹å–„ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã®åŸºç›¤ã§ã‚ã‚‹ã€‚æ—¢å­˜ã®RoundControllerå®Ÿè£…ã‹ã‚‰ã®å®Œå…¨ãªç§»è¡Œã«å¿…è¦ã§ã‚ã‚‹ã€‚

**ç‹¬ç«‹ãƒ†ã‚¹ãƒˆ**: RoundControllerã‹ã‚‰UserPromptBuilderã‚’å‘¼ã³å‡ºã—ã€ãƒ©ã‚¦ãƒ³ãƒ‰1ã§ã¯ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ»å±¥æ­´ä¸åœ¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå«ã¾ã‚Œã€ãƒ©ã‚¦ãƒ³ãƒ‰2ä»¥é™ã§ã¯å…ƒã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã™ã¹ã¦ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã®å±¥æ­´ã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°æƒ…å ±ãŒæ­£ã—ãå«ã¾ã‚Œã‚‹ã“ã¨ã§æ¤œè¨¼å¯èƒ½ã§ã‚ã‚‹ã€‚

**å—ã‘å…¥ã‚Œã‚·ãƒŠãƒªã‚ª**:

1. **å‰æ** ãƒ¦ãƒ¼ã‚¶ãŒã€Œãƒ‡ãƒ¼ã‚¿åˆ†æžã‚¿ã‚¹ã‚¯ã€ã¨ã„ã†ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é€ä¿¡ã—ã€ãƒ©ã‚¦ãƒ³ãƒ‰1ã§ã‚ã‚‹ã€**å®Ÿè¡Œ** RoundControllerãŒUserPromptBuilderã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ•´å½¢ã‚’ä¾é ¼ã™ã‚‹ã€**çµæžœ** å…ƒã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«åŠ ãˆã¦ã€Œç¾åœ¨ã¯ãƒ©ã‚¦ãƒ³ãƒ‰1ã§ã™ã€‚éŽåŽ»ã®Submissionã¨ãƒ©ãƒ³ã‚­ãƒ³ã‚°æƒ…å ±ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚ã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå«ã¾ã‚Œã‚‹
2. **å‰æ** ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„ã€**å®Ÿè¡Œ** UserPromptBuilderãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ•´å½¢ã™ã‚‹ã€**çµæžœ** ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆprompt_builder.tomlã«å®šç¾©ã•ã‚ŒãŸå¤‰æ•°åŸ‹ã‚è¾¼ã¿æ¸ˆã¿ã®team_user_promptï¼‰ãŒä½¿ç”¨ã•ã‚Œã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãªã„
3. **å‰æ** ãƒ©ã‚¦ãƒ³ãƒ‰1ãŒå®Œäº†ã—ã€Submissionã¨è©•ä¾¡çµæžœãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ã€**å®Ÿè¡Œ** RoundControllerãŒãƒ©ã‚¦ãƒ³ãƒ‰2ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ•´å½¢ã‚’ä¾é ¼ã™ã‚‹ã€**çµæžœ** ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å…ƒã®ã‚¿ã‚¹ã‚¯ã€ãƒ©ã‚¦ãƒ³ãƒ‰1ã®å±¥æ­´ï¼ˆã‚¹ã‚³ã‚¢ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã€Submissionå†…å®¹ï¼‰ãŒå«ã¾ã‚Œã‚‹
4. **å‰æ** 5ãƒ©ã‚¦ãƒ³ãƒ‰ãŒå®Œäº†ã—ã¦ã„ã‚‹ã€**å®Ÿè¡Œ** RoundControllerãŒãƒ©ã‚¦ãƒ³ãƒ‰6ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ•´å½¢ã‚’ä¾é ¼ã™ã‚‹ã€**çµæžœ** ã™ã¹ã¦ã®ãƒ©ã‚¦ãƒ³ãƒ‰ï¼ˆãƒ©ã‚¦ãƒ³ãƒ‰1ã€œ5ï¼‰ã®å±¥æ­´ãŒå«ã¾ã‚Œã‚‹
5. **å‰æ** Leader Boardã«è¤‡æ•°ãƒãƒ¼ãƒ ã®ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã€**å®Ÿè¡Œ** UserPromptBuilderãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ•´å½¢ã™ã‚‹ã€**çµæžœ** ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å…¨ãƒãƒ¼ãƒ ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã¨å½“è©²ãƒãƒ¼ãƒ ã®é †ä½ãŒå«ã¾ã‚Œã‚‹
6. **å‰æ** å½“è©²ãƒãƒ¼ãƒ ãŒ1ä½ã§ã‚ã‚‹ã€**å®Ÿè¡Œ** UserPromptBuilderãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ•´å½¢ã™ã‚‹ã€**çµæžœ** ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã€ŒðŸ† ç¾åœ¨ã€ã‚ãªãŸã®ãƒãƒ¼ãƒ ã¯1ä½ã§ã™ï¼ã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå«ã¾ã‚Œã‚‹
7. **å‰æ** å½“è©²ãƒãƒ¼ãƒ ãŒ1ä½ä»¥å¤–ã§ã‚ã‚‹ã€**å®Ÿè¡Œ** UserPromptBuilderãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ•´å½¢ã™ã‚‹ã€**çµæžœ** ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã€Œç¾åœ¨ã€{total_teams}ãƒãƒ¼ãƒ ä¸­{position}ä½ã§ã™ã€‚ã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå«ã¾ã‚Œã‚‹

---

### ãƒ¦ãƒ¼ã‚¶ã‚¹ãƒˆãƒ¼ãƒªãƒ¼2 - Jinja2ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã‚ˆã‚‹ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚º (å„ªå…ˆåº¦: P2)

é–‹ç™ºè€…ãƒ»ç ”ç©¶è€…ã¨ã—ã¦ã€TOMLãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆprompt_builder.tomlï¼‰ã«å¤‰æ•°åŸ‹ã‚è¾¼ã¿ã‚’ä½¿ç”¨ã—ã¦team_user_promptã‚’å®šç¾©ã—ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æ§‹é€ ã‚„æ–‡è¨€ã‚’ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºã—ã€å®Ÿé¨“çš„ãªãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è©¦ã™ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„ã€‚

**ã“ã®å„ªå…ˆåº¦ã®ç†ç”±**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç²¾åº¦æ”¹å–„ã®å®Ÿé¨“ã‚’å®¹æ˜“ã«ã™ã‚‹ãŸã‚ã®ä¸­æ ¸æ©Ÿèƒ½ã§ã‚ã‚‹ã€‚TOMLå†…ã®Jinja2å¤‰æ•°åŸ‹ã‚è¾¼ã¿ã«ã‚ˆã‚Šã€ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã›ãšã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’èª¿æ•´ã§ãã‚‹ã€‚

**ç‹¬ç«‹ãƒ†ã‚¹ãƒˆ**: prompt_builder.tomlå†…ã«ã‚«ã‚¹ã‚¿ãƒ team_user_promptã‚’å®šç¾©ã—ã€UserPromptBuilderãŒãã‚Œã‚’ä½¿ç”¨ã—ã¦ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ•´å½¢ã—ã€æœŸå¾…ã™ã‚‹ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å¤‰æ•°ãŒæ­£ã—ãåŸ‹ã‚è¾¼ã¾ã‚Œã‚‹ã“ã¨ã§æ¤œè¨¼å¯èƒ½ã§ã‚ã‚‹ã€‚

**å—ã‘å…¥ã‚Œã‚·ãƒŠãƒªã‚ª**:

1. **å‰æ** prompt_builder.tomlå†…ã«ã‚«ã‚¹ã‚¿ãƒ team_user_promptãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã€**å®Ÿè¡Œ** UserPromptBuilderãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ•´å½¢ã™ã‚‹ã€**çµæžœ** ã‚«ã‚¹ã‚¿ãƒ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒä½¿ç”¨ã•ã‚Œã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ä½¿ç”¨ã•ã‚Œãªã„
2. **å‰æ** team_user_promptã« `{{ user_prompt }}` ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ãŒã‚ã‚‹ã€**å®Ÿè¡Œ** UserPromptBuilderãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ•´å½¢ã™ã‚‹ã€**çµæžœ** å…ƒã®ãƒ¦ãƒ¼ã‚¶ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒæ­£ã—ãåŸ‹ã‚è¾¼ã¾ã‚Œã‚‹
3. **å‰æ** team_user_promptã« `{{ submission_history }}` ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ãŒã‚ã‚‹ã€**å®Ÿè¡Œ** ãƒ©ã‚¦ãƒ³ãƒ‰2ä»¥é™ã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ•´å½¢ã™ã‚‹ã€**çµæžœ** ã™ã¹ã¦ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã®Submissionå±¥æ­´ï¼ˆæ•´å½¢æ¸ˆã¿æ–‡å­—åˆ—ï¼‰ãŒåŸ‹ã‚è¾¼ã¾ã‚Œã‚‹
4. **å‰æ** team_user_promptã« `{{ ranking_table }}` ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ãŒã‚ã‚‹ã€**å®Ÿè¡Œ** UserPromptBuilderãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ•´å½¢ã™ã‚‹ã€**çµæžœ** Leader Boardã‹ã‚‰å–å¾—ã—ãŸãƒ©ãƒ³ã‚­ãƒ³ã‚°æƒ…å ±ï¼ˆæ•´å½¢æ¸ˆã¿æ–‡å­—åˆ—ï¼‰ãŒåŸ‹ã‚è¾¼ã¾ã‚Œã‚‹
5. **å‰æ** team_user_promptã« `{{ current_datetime }}` ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ãŒã‚ã‚‹ã€**å®Ÿè¡Œ** UserPromptBuilderãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ•´å½¢ã™ã‚‹ã€**çµæžœ** ã‚·ã‚¹ãƒ†ãƒ ã®ç’°å¢ƒå¤‰æ•°TZã«åŸºã¥ãç¾åœ¨æ—¥æ™‚ãŒåŸ‹ã‚è¾¼ã¾ã‚Œã‚‹

---

### ãƒ¦ãƒ¼ã‚¶ã‚¹ãƒˆãƒ¼ãƒªãƒ¼3 - è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®åˆæœŸåŒ– (å„ªå…ˆåº¦: P3)

é–‹ç™ºè€…ãƒ»ç ”ç©¶è€…ã¨ã—ã¦ã€`mixseek config init` ã‚³ãƒžãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€UserPromptBuilderã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã€ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºã®é–‹å§‹ç‚¹ã¨ã—ã¦ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„ã€‚

**ã“ã®å„ªå…ˆåº¦ã®ç†ç”±**: æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ”¯æ´ã€å®Ÿé¨“ã®é–‹å§‹ã‚’å®¹æ˜“ã«ã™ã‚‹ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã—ã¦ã‚‚æ©Ÿèƒ½ã™ã‚‹ã€‚

**ç‹¬ç«‹ãƒ†ã‚¹ãƒˆ**: `mixseek config init` ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€UserPromptBuilderã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆprompt_builder.tomlï¼‰ãŒç”Ÿæˆã•ã‚Œã‚‹ã“ã¨ã§æ¤œè¨¼å¯èƒ½ã§ã‚ã‚‹ã€‚

**å—ã‘å…¥ã‚Œã‚·ãƒŠãƒªã‚ª**:

1. **å‰æ** ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ãªã„ã€**å®Ÿè¡Œ** `mixseek config init` ã‚’å®Ÿè¡Œã™ã‚‹ã€**çµæžœ** `configs/prompt_builder.toml` ãŒç”Ÿæˆã•ã‚Œã‚‹
2. **å‰æ** ç”Ÿæˆã•ã‚ŒãŸTOMLãƒ•ã‚¡ã‚¤ãƒ«ã€**å®Ÿè¡Œ** ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚’ç¢ºèªã™ã‚‹ã€**çµæžœ** team_user_promptãŒå¤‰æ•°åŸ‹ã‚è¾¼ã¿å½¢å¼ã§å®šç¾©ã•ã‚Œã€ã™ã¹ã¦ã®åˆ©ç”¨å¯èƒ½ãªãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å¤‰æ•°ãŒã‚³ãƒ¡ãƒ³ãƒˆä»˜ãã§è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹
3. **å‰æ** æ—¢å­˜ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã€**å®Ÿè¡Œ** `mixseek config init --force` ã‚’å®Ÿè¡Œã™ã‚‹ã€**çµæžœ** æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸Šæ›¸ãã—ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šãŒç”Ÿæˆã•ã‚Œã‚‹

---

### ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹

- **team_user_promptãŒè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«å®šç¾©ã•ã‚Œã¦ã„ãªã„å ´åˆ**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆæ—¢å­˜RoundControllerå®Ÿè£…ã¨åŒã˜å½¢å¼ï¼‰ãŒä½¿ç”¨ã•ã‚Œã‚‹
- **team_user_promptã®æ§‹æ–‡ã‚¨ãƒ©ãƒ¼**: Jinja2ã®è§£æžã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã€ã‚¨ãƒ©ãƒ¼ç®‡æ‰€ã‚’å«ã‚€æ˜Žç¢ºãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- **å­˜åœ¨ã—ãªã„ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å¤‰æ•°ã‚’ä½¿ç”¨**: Jinja2ãŒã‚¨ãƒ©ãƒ¼ã‚’ç™ºç”Ÿã•ã›ã€æœªå®šç¾©ã®å¤‰æ•°åã‚’å«ã‚€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- **Leader BoardãŒç©ºã®å ´åˆ**: ranking_tableå¤‰æ•°ã«ã€Œç¾åœ¨ã¯ãƒ©ãƒ³ã‚­ãƒ³ã‚°æƒ…å ±ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã€ã¨ã„ã†æ–‡å­—åˆ—ãŒè¨­å®šã•ã‚Œã‚‹
- **éŽåŽ»ã®å±¥æ­´ãŒå­˜åœ¨ã—ãªã„ï¼ˆãƒ©ã‚¦ãƒ³ãƒ‰1ï¼‰**: submission_historyå¤‰æ•°ã«ã€Œã¾ã éŽåŽ»ã®Submissionã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã€ã¨ã„ã†æ–‡å­—åˆ—ãŒè¨­å®šã•ã‚Œã‚‹
- **ç’°å¢ƒå¤‰æ•°TZãŒè¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆ**: UTCã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã‚‹
- **ç’°å¢ƒå¤‰æ•°TZãŒä¸æ­£ãªå€¤ã®å ´åˆ**: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã€æœ‰åŠ¹ãªtimezoneåã®ä¾‹ã‚’å«ã‚€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- **forãƒ«ãƒ¼ãƒ—ã‚„ifãªã©ã®Jinja2åˆ¶å¾¡æ§‹æ–‡ã‚’ä½¿ç”¨**: å®Ÿè¡Œã•ã‚Œã‚‹ãŒã€æŽ¨å¥¨ã•ã‚Œãªã„ï¼ˆãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å¤‰æ•°ã¯UserPromptBuilderå†…ã§äº‹å‰ã«æ•´å½¢ã•ã‚Œã‚‹ï¼‰

## è¦ä»¶ *(å¿…é ˆ)*

### æ©Ÿèƒ½è¦ä»¶

- **FR-001**: UserPromptBuilderã¯ç‹¬ç«‹ã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ`mixseek.prompt_builder`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰ã¨ã—ã¦å®Ÿè£…ã•ã‚Œãªã‘ã‚Œã°ãªã‚‰ãªã„
- **FR-002**: UserPromptBuilderã¯RoundControllerã‹ã‚‰å‘¼ã³å‡ºã•ã‚Œã€ãƒ©ã‚¦ãƒ³ãƒ‰ç•ªå·ã€å…ƒã®ãƒ¦ãƒ¼ã‚¶ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€éŽåŽ»ã®Submissionå±¥æ­´ã‚’å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚‰ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚Leader Boardãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®å–å¾—ã¯UserPromptBuilderã®å†…éƒ¨æ©Ÿèƒ½ã¨ã—ã¦å®Ÿè£…ã•ã‚Œãªã‘ã‚Œã°ãªã‚‰ãªã„
- **FR-003**: ãƒ©ã‚¦ãƒ³ãƒ‰1ã§ã¯ã€UserPromptBuilderã¯å…ƒã®ãƒ¦ãƒ¼ã‚¶ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«åŠ ãˆã¦ã€Œç¾åœ¨ã¯ãƒ©ã‚¦ãƒ³ãƒ‰1ã§ã™ã€‚éŽåŽ»ã®Submissionã¨ãƒ©ãƒ³ã‚­ãƒ³ã‚°æƒ…å ±ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚ã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å«ã‚€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¿”ã•ãªã‘ã‚Œã°ãªã‚‰ãªã„
- **FR-004**: ãƒ©ã‚¦ãƒ³ãƒ‰2ä»¥é™ã§ã¯ã€UserPromptBuilderã¯ä»¥ä¸‹ã®æƒ…å ±ã‚’çµ±åˆã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆã—ãªã‘ã‚Œã°ãªã‚‰ãªã„:
  - å…ƒã®ãƒ¦ãƒ¼ã‚¶ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
  - éŽåŽ»ã®Submissionå±¥æ­´ï¼ˆã™ã¹ã¦ã®ãƒ©ã‚¦ãƒ³ãƒ‰ï¼‰
  - Leader Boardãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆå…¨ãƒãƒ¼ãƒ ã®æœ€é«˜ã‚¹ã‚³ã‚¢ã¨å½“è©²ãƒãƒ¼ãƒ ã®é †ä½ï¼‰
  - æ”¹å–„ç›®æ¨™ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- **FR-005**: UserPromptBuilderã¯Jinja2ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã‚’ä½¿ç”¨ã—ã¦ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆã—ãªã‘ã‚Œã°ãªã‚‰ãªã„
- **FR-006**: UserPromptBuilderã¯ä»¥ä¸‹ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å¤‰æ•°ã‚’æä¾›ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„:
  - `user_prompt`: å…ƒã®ãƒ¦ãƒ¼ã‚¶ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
  - `round_number`: ç¾åœ¨ã®ãƒ©ã‚¦ãƒ³ãƒ‰ç•ªå·
  - `submission_history`: éŽåŽ»ã®Submissionå±¥æ­´ï¼ˆæ•´å½¢æ¸ˆã¿æ–‡å­—åˆ—ã€ãƒ©ã‚¦ãƒ³ãƒ‰1ã§ã¯ã€Œã¾ã éŽåŽ»ã®Submissionã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã€ï¼‰
  - `ranking_table`: Leader Boardãƒ©ãƒ³ã‚­ãƒ³ã‚°æƒ…å ±ï¼ˆæ•´å½¢æ¸ˆã¿æ–‡å­—åˆ—ã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãŒãªã„å ´åˆã¯ã€Œç¾åœ¨ã¯ãƒ©ãƒ³ã‚­ãƒ³ã‚°æƒ…å ±ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã€ï¼‰
  - `team_position_message`: å½“è©²ãƒãƒ¼ãƒ ã®é †ä½ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆæ•´å½¢æ¸ˆã¿æ–‡å­—åˆ—ï¼‰
  - `current_datetime`: ç¾åœ¨æ—¥æ™‚ï¼ˆISO 8601å½¢å¼ã€ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ä»˜ãã€ç’°å¢ƒå¤‰æ•°TZã«åŸºã¥ãã€‚TZãŒè¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã¯UTCã‚’ä½¿ç”¨ï¼‰
- **FR-007**: `submission_history` ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã¯ã€ã™ã¹ã¦ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã®å±¥æ­´ã‚’ä»¥ä¸‹ã®å½¢å¼ã§æ•´å½¢ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ï¼ˆæ—¢å­˜RoundControllerå®Ÿè£…ã¨åŒã˜ï¼‰:
  ```
  ## ãƒ©ã‚¦ãƒ³ãƒ‰ {round_number}
  ã‚¹ã‚³ã‚¢: {score:.2f}/100
  ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯: {feedback}
  ã‚ãªãŸã®æå‡ºå†…å®¹: {content}
  ```
- **FR-008**: `ranking_table` ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã¯ã€Leader Boardã‹ã‚‰å–å¾—ã—ãŸãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ä»¥ä¸‹ã®å½¢å¼ã§æ•´å½¢ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ï¼ˆæ—¢å­˜RoundControllerå®Ÿè£…ã¨åŒã˜ï¼‰:
  ```
  **#{rank} {team_name} (ã‚ãªãŸã®ãƒãƒ¼ãƒ ) - ã‚¹ã‚³ã‚¢: {score:.2f}/100 (ãƒ©ã‚¦ãƒ³ãƒ‰æ•°: {rounds})**
  #{rank} {team_name} - ã‚¹ã‚³ã‚¢: {score:.2f}/100 (ãƒ©ã‚¦ãƒ³ãƒ‰æ•°: {rounds})
  ```
- **FR-009**: `team_position_message` ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã¯ã€å½“è©²ãƒãƒ¼ãƒ ã®é †ä½ã«åŸºã¥ã„ã¦ä»¥ä¸‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ï¼ˆæ—¢å­˜RoundControllerå®Ÿè£…ã¨åŒã˜ï¼‰:
  - 1ä½: ã€ŒðŸ† ç¾åœ¨ã€ã‚ãªãŸã®ãƒãƒ¼ãƒ ã¯1ä½ã§ã™ï¼ã“ã®èª¿å­ã§é ‘å¼µã£ã¦ãã ã•ã„ã€‚ã€
  - 2-3ä½: ã€Œç¾åœ¨ã€{total_teams}ãƒãƒ¼ãƒ ä¸­{position}ä½ã§ã™ã€‚ç´ æ™´ã‚‰ã—ã„æˆç¸¾ã§ã™ï¼ã€
  - 4ä½ä»¥ä¸‹: ã€Œç¾åœ¨ã€{total_teams}ãƒãƒ¼ãƒ ä¸­{position}ä½ã§ã™ã€‚ã€
- **FR-010**: UserPromptBuilderã¯TOMLãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`$MIXSEEK_WORKSPACE/configs/prompt_builder.toml`ï¼‰ã‹ã‚‰è¨­å®šã‚’èª­ã¿è¾¼ã¾ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚è¨­å®šé …ç›®ã¯ä»¥ä¸‹ã‚’å«ã‚€:
  - `team_user_prompt`: Jinja2å¤‰æ•°åŸ‹ã‚è¾¼ã¿ã‚’ä½¿ç”¨ã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ–‡å­—åˆ—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯æ—¢å­˜RoundControllerå®Ÿè£…ã¨åŒã˜å½¢å¼ï¼‰
- **FR-011**: team_user_promptãŒè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«å®šç¾©ã•ã‚Œã¦ã„ãªã„å ´åˆã€UserPromptBuilderã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯æ—¢å­˜RoundControllerå®Ÿè£…ï¼ˆ`_format_prompt_for_round`ãƒ¡ã‚½ãƒƒãƒ‰ï¼‰ã¨åŒã˜å½¢å¼ã§ã‚ã‚‹
- **FR-012**: UserPromptBuilderã¯ `mixseek.config.ConfigurationManager` ã‚’ä½¿ç”¨ã—ã¦è¨­å®šã‚’èª­ã¿è¾¼ã¾ãªã‘ã‚Œã°ãªã‚‰ãªã„ï¼ˆä»•æ§˜051-configurationæº–æ‹ ï¼‰
- **FR-013**: `mixseek config init` ã‚³ãƒžãƒ³ãƒ‰ã¯UserPromptBuilderã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`configs/prompt_builder.toml`ï¼‰ã‚’ç”Ÿæˆã—ãªã‘ã‚Œã°ãªã‚‰ãªã„
- **FR-014**: ç”Ÿæˆã•ã‚Œã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€team_user_promptãŒå¤‰æ•°åŸ‹ã‚è¾¼ã¿å½¢å¼ã§å®šç¾©ã•ã‚Œã€ã™ã¹ã¦ã®åˆ©ç”¨å¯èƒ½ãªãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å¤‰æ•°ãŒã‚³ãƒ¡ãƒ³ãƒˆä»˜ãã§è¨˜è¼‰ã•ã‚Œãªã‘ã‚Œã°ãªã‚‰ãªã„
- **FR-015**: ç¾åœ¨æ—¥æ™‚ã®timezoneã¯ç’°å¢ƒå¤‰æ•°TZã®ã¿ã«ä¾å­˜ã—ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯å«ã¾ã‚Œãªã„ã€‚TZç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã€UTCã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦ä½¿ç”¨ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„
- **FR-016**: UserPromptBuilderã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚ã«ã€forãƒ«ãƒ¼ãƒ—ãªã©ã®Jinja2åˆ¶å¾¡æ§‹æ–‡ã‚’è¨±å¯ã™ã‚‹ãŒã€ã™ã¹ã¦ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å¤‰æ•°ã¯äº‹å‰ã«æ•´å½¢ã•ã‚ŒãŸæ–‡å­—åˆ—ã¨ã—ã¦æä¾›ã•ã‚Œãªã‘ã‚Œã°ãªã‚‰ãªã„
- **FR-017**: RoundControllerã® `_format_prompt_for_round` ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€UserPromptBuilderã¸ã®å‘¼ã³å‡ºã—ã«ç½®ãæ›ãˆã‚‰ã‚Œãªã‘ã‚Œã°ãªã‚‰ãªã„

### ä¸»è¦ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ *(æ©Ÿèƒ½ãŒãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€å ´åˆã«å«ã‚ã‚‹)*

- **UserPromptBuilder**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ•´å½¢ã‚’æ‹…å½“ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€‚Jinja2ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã‚’ä½¿ç”¨ã—ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆTOMLï¼‰ã‹ã‚‰team_user_promptã‚’èª­ã¿è¾¼ã‚€ã€‚Leader Boardãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®å–å¾—æ©Ÿèƒ½ã‚’å†…è”µã™ã‚‹
- **PromptBuilderSettings**: UserPromptBuilderã®è¨­å®šã‚’è¡¨ã™Pydantic Modelï¼ˆBaseSettingsã‚’ç¶™æ‰¿ï¼‰ã€‚team_user_promptï¼ˆstrï¼‰ã‚’ä¿æŒã™ã‚‹
- **RoundPromptContext**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã«å¿…è¦ãªã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ã‚’è¡¨ã™Pydantic Modelã€‚user_promptã€round_numberã€submission_historyï¼ˆã™ã¹ã¦ã®ãƒ©ã‚¦ãƒ³ãƒ‰ï¼‰ã‚’ä¿æŒã™ã‚‹
- **RoundState**: å„ãƒ©ã‚¦ãƒ³ãƒ‰ã®å®Œå…¨ãªçŠ¶æ…‹ã‚’ä¿æŒã™ã‚‹dataclassï¼ˆ012-round-controllerä»•æ§˜ã§å®šç¾©ï¼‰ã€‚round_numberã€submission_contentã€evaluation_scoreã€evaluation_feedbackã‚’å«ã‚€
- **LeaderBoardRanking**: Leader Boardãƒ©ãƒ³ã‚­ãƒ³ã‚°æƒ…å ±ã‚’è¡¨ã™åž‹ã€‚team_idã€team_nameã€max_scoreã€total_roundsã‚’å«ã‚€dictåž‹ã®ãƒªã‚¹ãƒˆã€‚RoundControllerã§å®Ÿè£…æ¸ˆã¿ã®ã‚‚ã®ã‚’åˆ©ç”¨ã™ã‚‹

## æˆåŠŸåŸºæº– *(å¿…é ˆ)*

### æ¸¬å®šå¯èƒ½ãªæˆæžœ

- **SC-001**: RoundControllerã®æ—¢å­˜ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ•´å½¢ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆ`_format_prompt_for_round`ãƒ¡ã‚½ãƒƒãƒ‰ï¼‰ãŒUserPromptBuilderã«100%ç§»è¡Œã•ã‚Œã€åŒã˜å‡ºåŠ›ãŒç”Ÿæˆã•ã‚Œã‚‹
- **SC-002**: ãƒ©ã‚¦ãƒ³ãƒ‰1ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ•´å½¢ãŒ10msä»¥å†…ã«å®Œäº†ã™ã‚‹ï¼ˆ95ãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«ï¼‰
- **SC-003**: ãƒ©ã‚¦ãƒ³ãƒ‰2ä»¥é™ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ•´å½¢ï¼ˆå±¥æ­´ãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°æƒ…å ±å«ã‚€ï¼‰ãŒ50msä»¥å†…ã«å®Œäº†ã™ã‚‹ï¼ˆ95ãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«ï¼‰
- **SC-004**: ã‚«ã‚¹ã‚¿ãƒ team_user_promptã‚’ä½¿ç”¨ã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ•´å½¢ãŒ100%æ­£ç¢ºã«å‹•ä½œã™ã‚‹ï¼ˆã™ã¹ã¦ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å¤‰æ•°ãŒæ­£ã—ãåŸ‹ã‚è¾¼ã¾ã‚Œã‚‹ï¼‰
- **SC-005**: team_user_promptãŒè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«å®šç¾©ã•ã‚Œã¦ã„ãªã„å ´åˆã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒ100%æ­£ç¢ºã«ä½¿ç”¨ã•ã‚Œã‚‹
- **SC-006**: `mixseek config init` ã‚³ãƒžãƒ³ãƒ‰ã§UserPromptBuilderã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒ100%æ­£ç¢ºã«ç”Ÿæˆã•ã‚Œã‚‹
- **SC-007**: ç”Ÿæˆã•ã‚ŒãŸè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®team_user_promptã‚’ä½¿ç”¨ã—ã¦ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ•´å½¢ã—ã€æ—¢å­˜RoundControllerå®Ÿè£…ã¨åŒã˜å‡ºåŠ›ãŒç”Ÿæˆã•ã‚Œã‚‹
- **SC-008**: ç’°å¢ƒå¤‰æ•°TZã«åŸºã¥ãç¾åœ¨æ—¥æ™‚ãŒ100%æ­£ç¢ºã«ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å¤‰æ•°ã«åŸ‹ã‚è¾¼ã¾ã‚Œã‚‹ã€‚TZç’°å¢ƒå¤‰æ•°ãŒæœªè¨­å®šã®å ´åˆã€UTCãŒä½¿ç”¨ã•ã‚Œã‚‹
- **SC-009**: RoundControllerã®æ—¢å­˜ãƒ†ã‚¹ãƒˆï¼ˆ`tests/unit/round_controller/test_round_controller.py`ï¼‰ãŒã€UserPromptBuilderçµ±åˆå¾Œã‚‚100%ãƒ‘ã‚¹ã™ã‚‹
- **SC-010**: ã™ã¹ã¦ã®ãƒ©ã‚¦ãƒ³ãƒ‰å±¥æ­´ãŒæ­£ã—ãsubmission_historyãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã«å«ã¾ã‚Œã‚‹ï¼ˆç›´è¿‘2ãƒ©ã‚¦ãƒ³ãƒ‰ã®åˆ¶é™ãªã—ï¼‰

## å‰æ

- Jinja2ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã€ã¾ãŸã¯è¿½åŠ ã§ãã‚‹
- RoundControllerï¼ˆspecs/012-round-controllerï¼‰ã¯æ—¢ã«å®Ÿè£…æ¸ˆã¿ã§ã‚ã‚Šã€UserPromptBuilderã¯RoundControllerã‹ã‚‰å‘¼ã³å‡ºã•ã‚Œã‚‹
- Configuration Managerï¼ˆspecs/013-configurationï¼‰ã¯æ—¢ã«å®Ÿè£…æ¸ˆã¿ã§ã‚ã‚Šã€UserPromptBuilderã¯ConfigurationManagerã‚’ä½¿ç”¨ã—ã¦è¨­å®šã‚’èª­ã¿è¾¼ã‚€
- Leader Boardï¼ˆspecs/007-orchestrationã€specs/012-round-controllerï¼‰ã¯æ—¢ã«å®Ÿè£…æ¸ˆã¿ã§ã‚ã‚Šã€UserPromptBuilderã¯Leader Boardã‹ã‚‰ãƒ©ãƒ³ã‚­ãƒ³ã‚°æƒ…å ±ã‚’å–å¾—ã™ã‚‹
- ç’°å¢ƒå¤‰æ•°`MIXSEEK_WORKSPACE`ã¯è¨­å®šæ¸ˆã¿ã§ã‚ã‚Šã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¨è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯`$MIXSEEK_WORKSPACE`é…ä¸‹ã«é…ç½®ã•ã‚Œã‚‹
- ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å¤‰æ•°ï¼ˆsubmission_historyã€ranking_tableã€team_position_messageï¼‰ã¯UserPromptBuilderå†…ã§äº‹å‰ã«æ•´å½¢ã•ã‚Œã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã¯æ•´å½¢æ¸ˆã¿æ–‡å­—åˆ—ã¨ã—ã¦æ¸¡ã•ã‚Œã‚‹
- ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å¤‰æ•°ã¨ãã®åŸ‹ã‚è¾¼ã¿ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…ã¯æœ¬ä»•æ§˜ã®ã‚¹ã‚³ãƒ¼ãƒ—å¤–ã§ã‚ã‚Šã€å°†æ¥çš„ãªæ‹¡å¼µã¨ã—ã¦æ¤œè¨Žã•ã‚Œã‚‹

## ä¾å­˜é–¢ä¿‚

- **è¦ªä»•æ§˜**: specs/001-specs
  - FR-006 (ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ™ãƒ¼ã‚¹å‡¦ç†)
  - FR-002 (Prompt Builderå¤–éƒ¨åŒ–ã®æƒ³å®š)
- **é–¢é€£ä»•æ§˜**:
  - specs/012-round-controller (RoundControllerå®Ÿè£…ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ•´å½¢ãƒ­ã‚¸ãƒƒã‚¯)
  - specs/013-configuration (Configuration Managerã€Pydantic Settings)
  - specs/007-orchestration (Leader Boardå®Ÿè£…)
- **æŠ€è¡“ä¾å­˜**:
  - Jinja2 (>=3.1.0)
  - Pydantic (>=2.12)
  - pydantic-settings (>=2.12)
  - tomllib (Python 3.11+æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª)
